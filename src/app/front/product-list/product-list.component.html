<div class="search-box">
  
  <input
    type="text"
    placeholder="ðŸ” Search products..."
    [(ngModel)]="searchText"
    (input)="onSearchChange()"
  />
</div>

<div 
  *ngIf="showMessage" 
  [ngClass]="{'toast-success': success, 'toast-error': !success}" 
  class="toast-message">
  <span class="toast-icon">
    <i class="fa" [ngClass]="success ? 'fa-check-circle' : 'fa-exclamation-circle'"></i>
  </span>
  <span class="toast-text">{{ messageText }}</span>
</div>

<div class="product-grid-area">
  <div class="product-grid">
    <div *ngFor="let product of pagedProducts" class="product-card">
      <div class="product-image">
        <img
          [src]="'http://localhost:3000/uploads/' + product.image"
          alt="{{ product.name }}"
        />
      </div>
      <div class="product-info">
        <h4>{{ product.name }}</h4>
        <p class="product-price">{{ product.price | currency }}</p>
        <p class="product-desc">{{ product.description }}</p>
      </div>
      
      <button class="buy-btn" (click)="addToCart(product._id)">
        Add to Cart
      </button>
      
      <button class="buy-btn btn-secondary" style="margin-top: 10px;" 
        [routerLink]="['/productDetails', product.route]">
        More Details
      </button>
    </div>
  </div>

  <div class="pagination-wrapper" *ngIf="filteredProducts.length > itemsPerPage">
    <button class="page-nav-btn" (click)="prevPage()" [disabled]="currentPage === 1">
      <i class="fa fa-chevron-left"></i> Previous
    </button>
    
    <span class="page-info">
      Page <strong>{{ currentPage }}</strong> of <strong>{{ totalPages }}</strong>
    </span>

    <button class="page-nav-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
      Next <i class="fa fa-chevron-right"></i>
    </button>
  </div>

  <div *ngIf="!loading && filteredProducts.length === 0" class="empty-state">
    <i class="fa fa-search-minus"></i>
    <p>No products match your search or filters.</p>
  </div>
</div>